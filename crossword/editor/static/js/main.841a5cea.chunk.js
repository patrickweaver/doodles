(this.webpackJsonpcrossword=this.webpackJsonpcrossword||[]).push([[0],{21:function(e,t,r){e.exports=r(42)},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(19),o=r.n(c),u=(r(26),r(7)),l=r(2),i=(r(27),r(9)),s=r(1);r(28),r(29),r(30);var d=function(e){var t="game"===e.mode&&e.checkAnswers?e.answer===e.square.letter?"correct":"incorrect":"",r="",a=e.selectedSquare[0]===e.square.acrossWordNumber,c=e.selectedSquare[1]===e.square.downWordNumber;(a&&"across"===e.selectedDirection||c&&"down"===e.selectedDirection)&&e.square.active&&(r="selected-word",a&&c&&(r+=" selected-square"));var o=n.a.createElement("div",{className:"letter"},n.a.createElement("input",{id:"".concat(e.square.squareNumber,"-input"),className:t,type:"text",value:e.square.letter||"",onChange:function(t){var r=e.square,a=t.target;if(r.letter=a.value.toUpperCase(),e.setBoardSquare(r),a.setSelectionRange(0,a.value.length),0!==r.letter.length){var n="down"===e.selectedDirection?"down":"right";e.moveInput(e.square.squareNumber,n)}},onClick:function(t){e.onSelectSquare(e.square.acrossWordNumber||0,e.square.downWordNumber||0);var r=t.target;r.setSelectionRange(0,r.value.length)},maxLength:1,onKeyDown:function(t){var r=null;if("ArrowUp"!==t.key&&"ArrrowDown"!==t.key&&"Backspace"!==t.key||t.preventDefault(),"Backspace"===t.key){var a=e.square;a.letter="",e.setBoardSquare(a)}("ArrowUp"===t.key||"down"===e.selectedDirection&&"Backspace"===t.key)&&(r="up"),("ArrowLeft"===t.key||"across"===e.selectedDirection&&"Backspace"===t.key)&&(r="left"),"ArrowDown"===t.key&&(r="down"),"ArrowRight"===t.key&&(r="right"),null!==r&&e.moveInput(e.square.squareNumber,r)},autoComplete:"off"}));return n.a.createElement("div",{className:"board-square ".concat(e.square.active?r:"inactive"),onDoubleClick:function(t){if("game"!==e.mode){e.onSelectSquare(-1,-1);var r=e.square;r.active=!r.active,r.letter="",e.setBoardSquare(r)}}},n.a.createElement("div",{className:"clue-number"},"".concat(e.square.wordStart[0]?e.square.acrossWordNumber:e.square.wordStart[1]?e.square.downWordNumber:"")),e.square.active?o:null)};var m=function(e){var t=function(t,r){var a=e.boardSize-1,n=e.mode,c=[];if("diagonal"===n||"square"===n){var o=[a-t,a-r];c.push(o)}if("horizontal"===n||"horizontal-vertical"===n||"square"===n){var u=[t,a-r];c.push(u)}if("vertical"===n||"horizontal-vertical"===n||"square"===n){var l=[a-t,r];c.push(l)}return function(a){var n=Object(i.a)(e.board),o=a.active;n[t][r]=a,c.forEach((function(e){var t=Object(s.a)(e,2),r=t[0],a=t[1];n[r][a].active=o})),e.updateBoard(n)}};function r(t,r){var a=t+{right:1,left:-1,down:e.boardSize,up:-e.boardSize}[r],n=document.getElementById("".concat(a,"-input")),c=n;if(n){c.focus(),c.select();var o=e.board.flat()[a];o&&e.onSelectSquare(o.acrossWordNumber||0,o.downWordNumber||0)}}var a=e.board.map((function(a,c){return n.a.createElement("div",{key:"row-".concat(c),className:"board-row"},a.map((function(a,o){var u=e.correctBoard?e.correctBoard[c][o].letter:null;return n.a.createElement(d,{key:"".concat(c,"-").concat(o),rowIndex:c,colIndex:o,boardSize:e.boardSize,square:a,setBoardSquare:t(c,o),mode:e.mode,answer:u,selectedSquare:e.selectedSquare,onSelectSquare:e.onSelectSquare,selectedDirection:e.selectedDirection,moveInput:r,checkAnswers:e.checkAnswers})})))})),c=n.a.createElement("div",{id:"board"},a);return n.a.createElement("div",null,n.a.createElement("h2",null,"Board"),c)};r(31);function f(e){var t,r=Object(a.useState)(!1),c=Object(s.a)(r,2),o=c[0],u=c[1],l=Object(a.useState)(e.boardSize),i=Object(s.a)(l,2),d=i[0],m=i[1];return t=o?n.a.createElement("div",null,n.a.createElement("label",{className:"bs-label"},"Update Board Size:"),n.a.createElement("input",{className:"bs-element",type:"number",value:d,onChange:function(e){var t=parseInt(e.target.value);m(t)}}),n.a.createElement("button",{className:"bs-element",onClick:function(){u(!1),e.updateBoardSize(d)}},"Save")):n.a.createElement("div",null,n.a.createElement("h4",{className:"bs-element"},"Board Size: ",e.boardSize),n.a.createElement("button",{className:"bs-element",onClick:function(){return u(!0)}},"Change")),n.a.createElement("div",{id:"board-size"},t)}r(32),r(33);var b=function(e){var t=Object(a.useRef)(null),r=Object(a.useState)(0),c=Object(s.a)(r,2),o=c[0],u=c[1];Object(a.useEffect)((function(){if(t.current&&null!==o){var e=o||0;t.current.setSelectionRange(e,e),u(null)}}),[o]);var l,i,d={background:"repeating-linear-gradient(90deg, black 0, black 1.25ch, transparent 0, transparent 2ch) 5px 85%/ ".concat(2*e.clueAnswer.answer.length,"ch 1px no-repeat"),width:"Calc(2ch * ".concat(e.clueAnswer.answer.length," - 1px)")};return"editor"===e.mode?(l=n.a.createElement("li",null,n.a.createElement("label",{className:"ca-label"},"Answer:"),n.a.createElement("input",{style:d,className:"answer",ref:t,value:e.clueAnswer.answer,onChange:function(t){var r=t.target,a=r.value,n=r.selectionStart;u(n||0),e.updateClueAnswer("answer",a.toUpperCase(),e.index,e.dirIndex,n||0)},autoComplete:"off"})),i=n.a.createElement("li",null,n.a.createElement("label",{className:"ca-label"},"Clue:"),n.a.createElement("input",{className:"clue",value:e.clueAnswer.clue,onChange:function(t){var r=t.target.value;e.updateClueAnswer("clue",r,e.index,e.dirIndex)},autoComplete:"off"}))):i=n.a.createElement("li",null,n.a.createElement("p",null,e.clueAnswer.clue)),n.a.createElement("ul",{className:"clue-answer"},i,l)};var w=function(e){function t(t,r,a,n,c){e.updateClueAnswer&&e.updateClueAnswer(t,r,n,a,c)}var r=function(r,a){return n.a.createElement("ol",{className:"clue-answers-list"},r.map((function(r,c){return n.a.createElement("li",{key:c,value:r.number},n.a.createElement(b,{clueAnswer:r,updateClueAnswer:t,dirIndex:a,index:c,mode:e.mode}))})))};return n.a.createElement("div",null,n.a.createElement("ul",{className:"clue-answers-sections"},n.a.createElement("li",null,n.a.createElement("h3",null,"Across:"),r(e.clueAnswers[0],0)),n.a.createElement("li",null,n.a.createElement("h3",null,"Down:"),r(e.clueAnswers[1],1))))};r(34);function v(e){return n.a.createElement("div",{className:"mode-select"},n.a.createElement("h4",null,"Toggle Square Symmetry Mode:"),n.a.createElement("select",{onChange:e.onChange},n.a.createElement("option",null,"normal"),n.a.createElement("option",null,"horizontal"),n.a.createElement("option",null,"vertical"),n.a.createElement("option",null,"diagonal"),n.a.createElement("option",null,"horizontal-vertical"),n.a.createElement("option",null,"square")))}function p(e,t,r){return{active:!0,letter:"",wordStart:[!1,!1],acrossWordNumber:null,downWordNumber:null,squareNumber:e*r+t}}function h(e){return Array.from({length:e},(function(e,t){return t}))}function E(e){var t=h(e);return t.map((function(r){return t.map((function(t){return p(r,t,e)}))}))}function S(e){return e||" "}function g(e,t){var r=h(t);return r.map((function(a){return r.map((function(r){return e[a*t+r]}))}))}function N(e){var t=e.length,r=function(e,t){var r=function(e){return e.map((function(e){return e.wordStart=[!1,!1],e.acrossWordNumber=null,e.downWordNumber=null,e}))}(e),a=1;return r.reduce((function(e,r,n,c){var o=function(e){var t=e.flatBoard,r=e.index,a=e.boardSize,n=r%a===0,c=r<a,o=!1,u=!1;n||(o=!t[r-1].active),c||(u=!t[r-a].active);var l=n||o,i=c||u;return{acrossWordStart:l,downWordStart:i,eitherWordStart:l||i}}({flatBoard:c,index:n,boardSize:t}),u=o.downWordStart,l=o.acrossWordStart,i=o.eitherWordStart;if(r.active){var s=null,d=null;i&&(l&&(r.wordStart[0]=!0,s=a),u&&(r.wordStart[1]=!0,d=a),a+=1),r.acrossWordNumber=s||e[n-1].acrossWordNumber,r.downWordNumber=d||e[n-t].downWordNumber,r.squareNumber=n}return e.push(r),e}),[])}(e.flat(),t),a=function(e){return e.reduce((function(e,t,r){if(!t.acrossWordNumber||!t.downWordNumber)return e;var a=e[0].map((function(e){return e.number})),n=e[1].map((function(e){return e.number}));if(t.wordStart[0]){var c={direction:"across",number:t.acrossWordNumber,clue:"",answer:S(t.letter),firstLetterSquareNumber:r};e[0].push(c)}else{var o=a.indexOf(t.acrossWordNumber);e[0][o].answer+=S(t.letter)}if(t.wordStart[1]){var u={direction:"down",number:t.downWordNumber,clue:"",answer:S(t.letter),firstLetterSquareNumber:r};e[1].push(u)}else{var l=n.indexOf(t.downWordNumber);e[1][l].answer+=S(t.letter)}return e}),[[],[]])}(r);return[g(r,t),a]}function q(e,t){function r(e){var t=Object(s.a)(e,2);return(t[0]?"t":"f")+(t[1]?"t":"f")}var a=e.map((function(e){return e.map((function(e){return[e.active?"t":"f",e.letter,r(e.wordStart),e.acrossWordNumber,e.downWordNumber,e.squareNumber]}))})),n=t.map((function(e){return e.map((function(e){return["down"===e.direction?"d":"a",e.number,e.clue,e.answer,e.firstLetterSquareNumber]}))})),c=JSON.stringify([a,n]);return btoa(c)}function k(e,t,r,a,n,c){var o=r;-1===n&&-1===c?o="across"===r?"down":"across":(n===e[0]&&c===e[1]?o="across"===r?"down":"across":"none"===r&&(o="across"),t([n,c])),a(o)}function O(e,t,r,a){var n=function(e){return e.map((function(e){return e.reduce((function(e,t){var r=t.firstLetterSquareNumber;return null!=r&&(e[r]=t.clue),e}),{})}))}(t),c=N(e),o=Object(s.a)(c,2),u=o[0],l=function(e,t){return e.map((function(e,r){return e.map((function(e){var a=e.firstLetterSquareNumber;return null!==a&&t[r][a]?e.clue=t[r][a]:e.clue="",e}))}))}(o[1],n);r(u),a(l)}function y(e,t,r){var a=Object(i.a)(e);if(t<r)a=e.map((function(e){return e.slice(0,t)})).filter((function(e,r){return r<t}));else if(t>r){var n=h(t-r),c=h(t),o=n.map((function(e){return a=r+e,c.map((function(e){return p(a,e,t)}));var a}));a=e.map((function(e,a){return e.concat((c=a,n.map((function(e){return p(c,r+e,t)}))));var c})).concat(o)}return a}function j(e,t,r){var a=r||0,n=e.answer.length;if(t.length<n){var c=" ".repeat(n-t.length);e.answer=t.slice(0,a)+c+t.slice(a,t.length)}else e.answer=(t.slice(0,a)+t.slice(a+1,t.length)).slice(0,n);return e}function W(e,t,r){var a=0===r?"acrossWordNumber":"downWordNumber",n=0;return e.flat().map((function(e,r){var c=e;return e[a]===t.number&&(c.letter=t.answer[n],n+=1),c}))}var A=function(){var e=N(E(9)),t=Object(a.useState)(9),r=Object(s.a)(t,2),c=r[0],o=r[1],l=Object(a.useState)(e[0]),d=Object(s.a)(l,2),b=d[0],p=d[1],h=Object(a.useState)(e[1]),S=Object(s.a)(h,2),A=S[0],C=S[1],z=function(e,t){return O(e,t,p,C)},B=Object(a.useState)("normal"),x=Object(s.a)(B,2),D=x[0],I=x[1],L=Object(a.useState)([1,1]),T=Object(s.a)(L,2),R=T[0],U=T[1],G=Object(a.useState)("none"),J=Object(s.a)(G,2),M=J[0],P=J[1];return n.a.createElement("div",{className:"editor"},n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"Crossword Puzzle Composer"),n.a.createElement("p",{id:"description"},"This is a composer for creating crossword puzzles. Answer updates will display both on the board and next to the clues below. Double click on a square to toggle it on or off."),n.a.createElement("ul",{id:"state"},n.a.createElement("li",null,n.a.createElement(u.b,{to:"".concat("/crossword","/play#").concat(q(b,A))},"Play This Game")),n.a.createElement("li",null,n.a.createElement("button",{onClick:function(e){var t=document.getElementById("game-link");t&&(t.select(),document.execCommand("copy"))}},"Copy Link to This Game")),n.a.createElement("li",null,n.a.createElement("input",{type:"text",id:"game-link",readOnly:!0,value:"".concat("https://doodles.patrickweaver.net").concat("/crossword","/play#").concat(q(b,A))})))),n.a.createElement("div",{id:"sections"},n.a.createElement("div",{id:"board-container"},n.a.createElement(f,{boardSize:c,updateBoardSize:function(e){var t=y(b,e,c);p(t),z(t,A),o(e)}}),n.a.createElement(v,{mode:D,onChange:function(e){return I(e.target.value)}}),n.a.createElement(m,{clueAnswers:A,board:b,boardSize:c,updateBoard:function(e){return z(e,A)},mode:D,selectedSquare:R,onSelectSquare:function(e,t){return k(R,U,M,P,e,t)},selectedDirection:M,checkAnswers:!1}),n.a.createElement("div",{className:"button-section"},n.a.createElement("button",{onClick:function(){return z(b.map((function(e){return e.map((function(e){return e.active=!0,e}))})),A)}},"Activate All"),n.a.createElement("button",{onClick:function(){return z(b.map((function(e){return e.map((function(e){return e.active&&(e.letter=""),e}))})),A)}},"Clear All"))),n.a.createElement("div",{id:"clues-container"},n.a.createElement(w,{clueAnswers:A,updateClueAnswer:function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=Object(i.a)(A),u=o[r][a];if("answer"===e){u=j(u,t,n);var l=W(b,u,r),s=g(l,c);z(s,A)}else u.clue=t,C(o)},mode:"editor"}))))};function C(e){var t=JSON.parse(atob(e)),r=Object(s.a)(t,2),a=r[0],n=r[1];return[a.map((function(e){return e.map((function(e){return{active:"t"===e[0],letter:e[1],wordStart:function(e){var t=e.split(""),r=Object(s.a)(t,2);return["t"===r[0],"t"===r[1]]}(e[2]),acrossWordNumber:e[3],downWordNumber:e[4],squareNumber:e[5]}}))})),n.map((function(e){return e.map((function(e){return{direction:"d"===e[0]?"down":"across",number:e[1],clue:e[2],answer:e[3],firstLetterSquareNumber:e[4]}}))}))]}r(40);function z(){var e,t=window.location.hash,r=C(t.slice(1,t.length)),c=Object(s.a)(r,2),o=c[0],l=c[1],i=N(E(o.length)),d=Object(a.useState)(i[0]),f=Object(s.a)(d,2),b=f[0],v=f[1],p=Object(a.useState)(l),h=Object(s.a)(p,2),S=h[0],g=h[1],q=Object(a.useState)([0,0]),y=Object(s.a)(q,2),j=y[0],W=y[1],A=Object(a.useState)("across"),z=Object(s.a)(A,2),B=z[0],x=z[1],D=Object(a.useState)(!1),I=Object(s.a)(D,2),L=I[0],T=I[1];return e=window.location.hash?n.a.createElement("div",null,n.a.createElement("p",{id:"description"},"This is a crossword puzzle created in this app. The clues and correct answers are encoded in the URL, which is why it is so long. Toggle the checkbox below the board to autocheck your answers."),n.a.createElement("div",{id:"sections"},n.a.createElement("div",{id:"board-container"},n.a.createElement(m,{clueAnswers:S,board:b,correctBoard:o,boardSize:b.length,updateBoard:function(e){return O(e,S,v,g)},mode:"game",selectedSquare:j,onSelectSquare:function(e,t){return k(j,W,B,x,e,t)},selectedDirection:B,checkAnswers:L}),n.a.createElement("div",{id:"check-answers-toggle"},n.a.createElement("label",null,"Check answers:"),n.a.createElement("input",{type:"checkbox",onChange:function(e){T(e.target.checked)}}))),n.a.createElement("div",{id:"clues-container"},n.a.createElement(w,{clueAnswers:S,mode:"game"})))):n.a.createElement("div",null,n.a.createElement("h2",null,"Invalid Game Link"),n.a.createElement("p",null,"This link does not correspond to a crossword. ",n.a.createElement(u.b,{to:"".concat("/crossword","/editor")},"Try making your own here."))),n.a.createElement("div",{id:"game"},n.a.createElement("p",null,n.a.createElement(u.b,{to:"".concat("/crossword","/editor")},"Make your own crossword here.")),n.a.createElement("h1",null,"Crossword Puzzle Game"),e)}r(41);function B(){return n.a.createElement("div",{id:"footer"},n.a.createElement("ul",null,n.a.createElement("li",null,"Made by ",n.a.createElement("a",{href:"https://www.patrickweaver.net/"},"Patrick Weaver")),n.a.createElement("li",null,n.a.createElement("a",{href:"https://github.com/patrickweaver/crossword"},"View Source"))))}var x=function(){return n.a.createElement(u.a,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{exact:!0,path:"".concat("/crossword","/")},n.a.createElement(l.a,{to:"".concat("/crossword","/editor")})),n.a.createElement(l.b,{path:"".concat("/crossword","/editor")},n.a.createElement(A,null)),n.a.createElement(l.b,{path:"".concat("/crossword","/play")},n.a.createElement(z,null))),n.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.841a5cea.chunk.js.map